<section class="section-expand" data-ng-controller="DistrictDashboardsController" data-ng-init="initiate()">
	<div class="container">
		<div cg-busy="{promise:promise,templateUrl:templateUrl,message:message,backdrop:backdrop,delay:delay,minDuration:minDuration}">
			<div id="header" class="row">
				<div class="col-md-8">
					<div id="title"><h3><b>Community Profiles Philippines</b></h3></div>
				</div>
				<!--<div id="count-info" class="col-md-8">
					<span class="filter-count "></span> selected out of <span class="total-count "></span> records:   
					<a href="javascript:dc.filterAll(); dc.redrawAll()">Reset All</a>
				</div>-->
			</div>
			<div class="row">
				<div class="col-md-7 colheight">
					<div class="flag-container">
						<div id="flag1" ng-click="level_up(2)">{{country_selection}}</div>
						<div id="flag2" ng-click="level_up(3)">{{prov_selection}}</div>
						<div id="flag3">{{mun_selection}}</div>
					</div>
					<div id="color-selection">Communities currently color-coded by <b>{{metric_label}}</b></div>
					<div id="map-chart" style="width:90%; height:150%"></div>
				</div>	
								
				<div class="col-md-5 colheight">
					<div class="row">
						<div id="count-info" class="general-info">
							<b> Community Profile for: </b>{{name_selection}}<br>
							{{type_selection}} with <span class="total-count "></span> {{subtype_selection}} (<span class="filter-count "></span> selected, <a href="javascript:dc.filterAll(); dc.redrawAll()">Select All</a>)
							<hr style="padding:0px; margin:5px">
							<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table6" ng-click="go('population')"></table>
							<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table7" ng-click="go('land_area')"></table>
							<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table8" ng-click="go('pop_density')"></table>
						</div>
					</div>
					<hr>
					<div class="row">
						<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false" style="height: 600px">
							<div class="carousel-inner" role="listbox" style="height: 350px">
							
								<div class="active item">
									<b style="position: relative; left: 20px">Risk score</b><hr>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table2" ng-click="go('risk_score')"></table>
									<hr>
									<b style="position: relative; left: 20px">Components:</b><hr>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table3" ng-click="go('vulnerability_score')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table4" ng-click="go('hazard_score')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table5" ng-click="go('coping_capacity_score')"></table>
								</div>
								<div class="item">
									<b style="position: relative; left: 20px">Vulnerability</b><hr>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table9" ng-click="go('poverty_incidence')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table10" ng-click="go('income_class')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table11" ng-click="go('gdp_per_capita')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table12" ng-click="go('hdi')"></table>
								</div>
								
								<div class="item">
									<b style="position: relative; left: 20px">Hazards</b><hr>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table13" ng-click="go('flood_risk')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table14" ng-click="go('cyclone_risk')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table15" ng-click="go('landslide_risk')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table16" ng-click="go('earthquake7_phys_exp')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table17" ng-click="go('tsunami_phys_exp')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table18" ng-click="go('cyclone_surge_2m_phys_exp')"></table>
								</div>
								
								<div class="item">
									<b style="position: relative; left: 20px">Coping capacity</b><hr>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table19" ng-click="go('nr_facilities')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table20" ng-click="go('nr_doctors')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table21" ng-click="go('good_governance_index')"></table>
									<table style="cursor:pointer" class="table-condensed table-dashboard table-hover" id="data-table22" ng-click="go('traveltime')"></table>
								</div>
								
							</div>
							<div class="controlsBlock">
								<div class="controls">
									<a class="left carousel-control" href="#myCarousel" data-slide="prev" ng-non-bindable><span class="glyphicon glyphicon-chevron-left"><span class="sr-only">Previous</span></span></a>
									<div class="carousel-indicators">
										<li data-target="#myCarousel" data-slide-to="0" class="active" ></li>
										<li data-target="#myCarousel" data-slide-to="1" ></li>
										<li data-target="#myCarousel" data-slide-to="2" ></li>
										<li data-target="#myCarousel" data-slide-to="3" ></li>
									</div>
									<a class="right carousel-control" href="#myCarousel" data-slide="next" ng-non-bindable><span class="glyphicon glyphicon-chevron-right"><span class="sr-only">Next</span></span></a>
								</div>
							</div>
							<hr>	
							<a class="btn" ng-href ="./data/{{data_input}}" target="_blank" >Export selected data (JSON)</a>
							<a class="btn" id="download" ng-click="export_csv()">Export selected data (CSV)</a>
						</div>
					</div>
				</div>
			</div>
			<div class="modal fade" id="myModal" role="dialog">
				<div class="modal-dialog">
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title"><b>{{metric_label}}</b></h4>
						</div>
						<div class="modal-body">
							<h5><b>Year source:</b> {{metric_year}}</h5><br>
							<h5><b>Source link:</b> <a href={{metric_source}} target="_blank">{{metric_source}}</a></h5><br>
							<h5><b>Description:</b> {{metric_desc}}</h5><br>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>